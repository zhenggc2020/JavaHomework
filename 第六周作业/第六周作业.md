###  题目01:  一条SQL语句在MYSQL中是如何执行的?

- 第一步: 连接到数据库; 连接完成后,如果没有后续的动作,这个连接就处于空闲状态;如果长时间闲置,连接就会自动将它断开.
- 第二步: 查缓存,mysql拿到一个查询请求后, 会先查询缓存,之前执行过的语句,其结果会以key-value对的形式,被直接存在内存中,.如果你的查询语句在缓存中,则会直接返回客户端.如果语句不在缓存中,就会继续后面的执行阶段.
- 第三步: 分析sql语句,mysql服务器,会对请求的字符串进行分析, 判断请求的语法是否正确,然后从字符串中将要查询的表,列,和各种查询条件都提取出来, 本质上是对一个SQL语句编译的过程, 这个过程涉及词法分析,语法分析,预处理器等;
- 第四步: 优化SQL语句.  优化器会对查询进行优化, 作用是根据解析树,生成不同的执行计划, 然后选择最优的执行计划.  会做如下优化: 选择索引,  选择基准表; 
- 第五步: 执行SQL语句,  开始执行sql语句的时候, 会先判断一下对执行语句的表有没有查询权限,如果没有,就会返回没有权限的提示. 如果有权限,则调用存储引擎的接口, 开始查询.  然后提取符合的数据,进行返回.

### 题目02: 请解释下你理解的事务是什么?

- 事务是一种保障逻辑完整性的机制, 事务内的一组操作, 要么全部成功, 要么全部失败.
- 事务包含四大特性, 原子性, 一致性,隔离性,持久性.
  - 原子性是指事务是一个不可分割的单位.要么发生,要么不发生.
  - 一致性是指 事务前后的数据的完整性必须保持一致;
  - 隔离性  是多个用户并发访问数据库时,一个用户的事务不能被其他用户的事务干扰.多个并发事务之间的数据要相互隔离, 避免相互干扰;
  - 持久性, 是指一个事务一旦被提交, 它对数据库中数据的改变就是永久性的, 接下来就算发生异常, 也不会受到影响;
- 事务会产生的并发问题如下
  - 脏读: 一个事务读取到了另一个事务未提交的数据;
  - 不可重复读, 一个事务读到了,另一个事务已经提交的数据. 引发事务中的多次查询结果不一致的问题.
  - 幻读: 一个事务读到了另一个事务已经插入的数据. 导致事务中多次查询的结果不一致的问题.
  - 丢失更新的问题;    是指两个事务针对同一数据进行修改操作, 会导致数据的更新丢失了,. 
- 事务的隔离级别 包含以下几种;
  - 读未提交[ RU ],一个事务读到另一个事务没有提交的数据. 存在3个问题(脏读, 不可重复读, 幻读 )
  - 读已提交[ RC ], 一个事务读到另一个事务已经提交的数据, 存在两个问题(不可重复读,幻读); 解决1个问题: 脏读;
  - 可重复读[ RR ],在一个事务中读到的数据始终保持一致, 无论另一个事务是否提交; 解决了(脏读, 不可重复读, 幻读 )等3个问题.
  - 串行化, 同时只能执行一个事务, 相当于事务中的单线程机制.
- mysql 事务在RC ,RR级别下,  使用了 MVCC基于版本控制的解决方案, 来解决并发问题.